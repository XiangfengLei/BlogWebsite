---
title: 四旋翼无人机-初学篇
date: 2018-3-17 19:50:34  
tags: 博客空间  
categories: 
- 博客空间  
- 实践项目   
- 无人机  

---
*本文说明
--- 
本文属个人原创，未经允许不得转载。
本文适用于刚进入无人机行业的初学者，主要介绍无人机的专业术语和基础知识。以实际工程实现为目的，介绍在工程上无人机机械结构、硬件、软件的实现过程。根据本文内容可较完整的制作出一架无人机，但可能不能达到成品无人机的飞行效果。 
<!--more-->
一、绪论
---
1.1 发展历史
---
	•1907年     第一架四旋翼飞行器出现，叫“旋翼机1号”。
	•1923年     de Bothezat helicopter成功离地5米。
	•192x年     Oehmichen No.2 飞行上千次，最高360米。
由于其控制难度大，惯性导航技术和飞行控制技术的不成熟，四旋翼飞行器进入沉寂期。直到本世纪初，MEMS技术，惯导技术的成熟，微型四旋翼作为很好的控制课题被多数高校研究。

	•2005年前后，开源飞控开始出现，四旋翼飞行器开始出现在航模圈和一部分工业应用中。
	•2010年  Parrot发布第一款大众娱乐四旋翼飞行器AR Drone
	•2013年  大疆发布“精灵” 四旋翼飞行器，引爆消费无人机市场。

<!--more-->
1.3 应用
---
 有军用、工业、消费、娱乐。
 航拍、娱乐、搜山探索等。

1.4 技术发展前景
---
飞控技术是非常通用的控制技术，可在无人驾驶、机器人中应用  
二、系统架构
---
2.1 机械架构
---
2.1.1 机架
---
（1）机身  
   　　　　　　![](https://i.imgur.com/gv0xVCm.png)  
　　　1）重量  
　　　机身的重量主要取决于其尺寸和材料。由于在相同拉力下，机身越轻意味着可分配的有效载荷越大，因此在保证机身性能的前提下，重量应尽量小。  
　　　2）轴距：四个电机组成圆的直径  
　　　　![](https://i.imgur.com/dabV3Ux.png)  
　　　3）布局   
常用X字型  
![](https://i.imgur.com/szJ1t7g.png)  
 
（2）起落架  
　　　1）支撑多旋翼重力  
　　　2）避免螺旋桨离地太近，而发生触碰  
　　　3）减弱起飞时的地效  
　　　4）消耗和吸收多旋翼在着陆时的撞击能量    
　　　　　　　　　　　　　![](https://i.imgur.com/BtdBByj.png)  
（3）涵道-外围保护圈  
　　　1）保护桨叶和人身安全  
　　　2）提高桨叶拉力效率，但同时增加了重量，不会有太大的效果    
　　　3）减少噪音，设计不好，不会有效果    
2.1.2 动力系统  
---
（1）螺旋桨  
　　　1）根据电机效率选用不同的螺旋桨，更能高效工作，提高续航时间。  
　　　2）型号  
　　　•假设螺旋桨在一种不能流动的介质中旋转，那么螺旋桨每转一圈，就会向前进一个距离，就称为螺距或桨距（ Propeller Pitch ）。  
　　　•螺旋桨一般用4个数字表示，其中前面2位是螺旋桨的直径，后面2位是螺旋桨的螺距。比如：1045桨的直径为10英寸，而螺距为4.5英寸。  
　　　3）弦长  
![](https://i.imgur.com/6ze9vK0.png)  
　　　4）转动惯量   
　　　•转动惯量(Moment of Inertia)是刚体绕轴转动时惯性（回转物体保持其匀速圆周运动或静止的特性）的量度，用字母I或J表示。 在经典力学中，转动惯量（又称质量惯性矩，简称惯距）通常以I 或J表示，SI 单位为 kg·m²。对于一个质点，I = mr²，其中 m 是其质量，r 是质点和转轴的垂直距离。   
　　　•较小的转动惯量可以提升电机的响应速度，从而提升多旋翼的性能。  
　　　5）力效  
　　　•机械功率（w）=力矩(N*m)*转速(rad/s)  
　　　•力效（g/w）=拉力（g）/机械功率（w）  
　　　6）静平衡和动平衡    
　　　• 进行静平衡和动平衡的目的是减少振动    
　　　• 螺旋桨静平衡是指螺旋桨重心与轴心线重合时的平衡状态；而螺旋桨动平衡是指螺旋桨重心与其惯性中心重合时的平衡状态
　　　• 出现不平衡的情况时，可以通过贴透明胶带到轻的桨叶，或用砂纸打磨偏重的螺旋桨平面（非边缘）来实现平衡。  
　　　7）旋转方向及安装  
　　　螺旋桨有两个朝向，每个螺旋桨都是朝桨叶的斜向上方向旋转，不同朝向的螺旋桨控制时电机旋转的方向是相反的，这样使得在理论上水平面方向上的合力为0，即前后左右平衡。  
 ![](https://i.imgur.com/w3R1OeD.png)  
（2）电机和驱动   
　　　•无刷电机  
　　　•空心杯  
	驱动芯片。。。。  
（3）电池　　　　
　　　•锂聚合物电池（Li Po）和镍氢电池（Ni Mh）  
　　　•电池随着放电能力下降，其输出电压会缓慢下降。剩余电量与放电时间并非线性关系。  
　　　•检测方法有检测电池单节电压和实时检测电池输出电流做积分计算  
2.1.3 指挥控制系统  
---
（1）遥控器和接收器  
　　　•手机APP  
　　　•日本手和美国手  
　　　•无线电频率72Mhz和2.4GHz（wifi 常用）  
（3）地面站  
　　　常用 MissionPlanner-1.3.50.msi 工具   

![](https://i.imgur.com/oajWZs2.png)  
三、数学模型
---
3.1 地球固联坐标系与机体坐标系
---
地球固联坐标系：以飞机起飞位置或者地心作为坐标原点og，先让x轴指向任意方向，zg轴垂直于地面向下，按右手定则确定yg轴。如下图：　　  

![](https://i.imgur.com/G7j5qBD.jpg)  
    　　
机体坐标系：以无人机的重心作为坐标原点ob，xb轴指向无人机的头部（左右两边对称），zb轴在平面内垂直向下，按上述右手定则确定yb轴。     
        　     　　
![](https://i.imgur.com/hXff0LC.jpg)　　　  

3.2　欧拉角/姿态角
---
定义：机体坐标系与地球固联坐标系之间的夹角。   
（1）偏航角ψ(yaw)：如图（a）,绕轴e3(z轴)顺时针旋转（朝轴e1方向向右旋转）为正，轴e1、e2、e3对应对地坐标系x、y、z轴，x轴为机头方向。    
（2）俯仰角θ(pitch)：如图（b）,绕轴k2(y轴)逆时针旋转（朝k1轴方向向上旋转）为正，轴k1，k2，k3对应对地坐标系x、y、z轴。  
（3）翻滚角Φ(roll)：如图（c），绕轴n1逆时针旋转(向右旋转)为正,轴n1，n2，n3对应对地坐标系x、y、z轴。    
 ![](https://i.imgur.com/mboqoiK.png)

3.3 欧拉角变化率与角速度关系
---
若机体旋转的角速度为：

$$R_{\ }^{b}\mathbf{\omega} = {\lbrack\mathbf{\omega}_{\mathbf{x}_{\mathbf{b}}},\mathbf{\omega}_{\mathbf{y}_{\mathbf{b}}},\mathbf{\omega}_{\mathbf{z}_{\mathbf{b}}}\rbrack}^{T}$$
3.4 旋转矩阵
---

3.5 四元素
---

四、控制过程
---
4.1 控制流程框图
---

4.2 姿态解算
---

4.3 位置估计
---



4.4 任务决策
---
一键起飞
一键降落




4.5 PID和整定方法
---

4.6 稳定性和可控性
---

4.7 健康评估和失效保护
---
低电检测

4.7 问题分析
---

五、 传感器标定和校准
---
5.1 imu惯性导航=加速度计acc+陀螺仪gyro
---
5.2 mag罗盘磁力计
---
5.3 baro气压计
---
5.4 GPS模块
---
5.5 flow光流
---
问题： 起飞阶段，光流测量的位移很短，导致测量的最大速度有限制，以至于在起飞阶段会有点跑偏。测量的最大速度与飞机的高度成正比。

六、 关键算法推导
---

6.1 卡尔曼滤波
---

6.2 互补滤波
---

6.3 滤波器
--
6.3.1 低通滤波器
---
6.3.2 高通滤波器
---

6.4 问题分析
---

七、代码实现过程
---

八、参考文献
---